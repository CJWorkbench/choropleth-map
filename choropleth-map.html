<html>
<head>
</head>
<body>
    This is a test.
    <p id="data-tag"></p>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script>
/*
This module is done in plain HTML/Javascript because react-leaflet-choropleth
does not seem to be well-supported enough to bother with.
*/
$(document).ready(function() {
    console.log(workbench);

    // URL regex to parse for wfModuleId
    var urlPattern = /^(https?\:\/\/.*\/api\/wfmodules\/)([0-9]+).*/;

    var urlMatch = urlPattern.exec(window.location.href);
    const urlBase = urlMatch[1];
    const wfModuleId = urlMatch[2]
    if(!urlMatch) {
        $('#data-tag').html('Error parsing url.');
    }

    $('#data-tag').html('wfModuleId: ' + wfModuleId);
    $.ajax({
        method: 'GET',
        url: urlBase + wfModuleId + '/render',
        success: function(data) {
            $('#data-tag').html(data);
            console.log(data);
        }
    })
});
</script>
</html>
